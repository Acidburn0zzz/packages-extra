# Based on the file created for Arch Linux by:
# Nano77 <nanoarch77@gmail.com>

# Maintainer: Guinux <nuxgui@gmail.com>

pkgname=gdm3setup
pkgver=20121023
pkgrel=1
pkgdesc="A GUI to setting GDM3"
arch=(any)
license=('GPL')
url="http://github.com/Nano77/gdm3setup"
source=(https://raw.github.com/Nano77/various/master/src/$pkgname-$pkgver.tar.xz)
depends=('gdm>=3' 'gnome-shell' 'python2-lxml')
conflicts=('gdm3setup-native-theme' 'gdm3setup-vala' 'gdm3setup-vala-native-theme')
sha256sums=('61af2b351b69f741190ebbf103b39f39dcde84a8dd8d212c787c9c4294e70caa')

build() {
  cd ${srcdir}/$pkgname-$pkgver

  cd ${srcdir}/$pkgname-$pkgver/po
  ${srcdir}/$pkgname-$pkgver/po/make-mo

}

package() {
  cd ${srcdir}/$pkgname-$pkgver
  
  install --mode=755 -D gdm3setup.py ${pkgdir}/usr/bin/gdm3setup.py
  install --mode=755 -D gdm3setup-daemon.py ${pkgdir}/usr/bin/gdm3setup-daemon.py
  install --mode=755 -D start-gdm3setup-daemon ${pkgdir}/usr/bin/start-gdm3setup-daemon
  install --mode=755 -D gdmlogin.py ${pkgdir}/usr/bin/gdmlogin.py
  install --mode=755 -D get_gdm.sh ${pkgdir}/usr/bin/get_gdm.sh
  install --mode=755 -D set_gdm.sh ${pkgdir}/usr/bin/set_gdm.sh
  install -D gdm3setup.desktop ${pkgdir}/usr/share/applications/gdm3setup.desktop
  install -D apps.nano77.gdm3setup.service ${pkgdir}/usr/share/dbus-1/system-services/apps.nano77.gdm3setup.service
  install -D apps.nano77.gdm3setup.service ${pkgdir}/usr/share/dbus-1/services/apps.nano77.gdm3setup.service
  install -D apps.nano77.gdm3setup.conf ${pkgdir}/etc/dbus-1/system.d/apps.nano77.gdm3setup.conf
  install -D apps.nano77.gdm3setup.policy ${pkgdir}/usr/share/polkit-1/actions/apps.nano77.gdm3setup.policy
  install -D gdm3setup.ui ${pkgdir}/usr/share/gdm3setup/ui/gdm3setup.ui
  cp -r locale/ ${pkgdir}/usr/share/locale/
}
