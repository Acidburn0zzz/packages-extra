#
# Maintainer: Clittle <philm@manjaro.org>
# Maintainer: Roland Singer <roland@manajro.org>

pkgname=('catalyst-server')
pkgver=1.12.4
pkgrel=3
arch=('i686' 'x86_64')
depends=(catalyst-input
         fontsproto
         libxdmcp
         libxfont
         libpciaccess
         libdrm
         libxi
         libxaw
         libxrender
         libdmx
         libxfixes
         libgl
         libxv
         libxext
         libgcrypt
         libxau
         pixman
         xkeyboard-config
         xorg-xkbcomp
         xorg-setxkbmap
         xorg-fonts-misc
         xproto
         randrproto
         renderproto
         xextproto
         inputproto
         kbproto
         videoproto
         dri2proto
         xineramaproto
         udev
         xorg-util-macros)
provides=(x-server
          xorg-server-common=$pkgver-$pkgrel
          xorg-server-devel=$pkgver-$pkgrel 
          xorg-server-xdmx=$pkgver-$pkgrel
          xorg-server-xephyr=$pkgver-$pkgrel
          xorg-server-xnest=$pkgver-$pkgrel
          xorg-server-xvfb=$pkgver-$pkgrel
          xorg-server=$pkgver-$pkgrel)
conflicts=('nvidia-utils<=290.10'
           xorg-server-common
           xorg-server-devel
           xorg-server-xdmx
           xorg-server-xephyr
           xorg-server-xnest
           xorg-server-xvfb
           xorg-server)
groups=(xorg12)
backup=(etc/X11/xorg.conf.d/10-evdev.conf etc/X11/xorg.conf.d/10-quirks.conf)
pkgdesc="Xorg-Server for Catalyst"
url="http://manjaro.org"
license=('custom')
source=(http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-$pkgver-$pkgrel-$CARCH.pkg.tar.xz
        http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-common-$pkgver-$pkgrel-$CARCH.pkg.tar.xz
        http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-devel-$pkgver-$pkgrel-$CARCH.pkg.tar.xz
        http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-xdmx-$pkgver-$pkgrel-$CARCH.pkg.tar.xz
        http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-xephyr-$pkgver-$pkgrel-$CARCH.pkg.tar.xz
        http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-xnest-$pkgver-$pkgrel-$CARCH.pkg.tar.xz
        http://catalyst.wirephire.com/repo/xorg112/$CARCH/xorg-server-xvfb-$pkgver-$pkgrel-$CARCH.pkg.tar.xz)
if [ "$CARCH" = "i686" ]; then
   sha256sums=(5a6321de8442b33a38e24f49d5ec81c79797358af61003b4dd6ad3ff2bcfb559
               841468438720ce40f05463e1f3c724a61b973dbe884998d961aa8c556e4fe290
               751a1675155668b29f77724b984e65034fe193ebc34942875b515441bc4e756a
               a03ff5a26077f3fef17ed35614af219a8c2eac6b1d58e8e3884711c3e7b5c85a
               9160cb947bd8cc409c0ec6504d2b157c5de365b3dd00d949e31554ce0db63b2f
               ab7cddab50dab7af395a745cae454b429a4596d5cb24c9e2c75c723a175eff6f
               ce91e0fa34725d3c023339add8b27fb66883313ebef057a937602e9dc5abecd5
)
else
   sha256sums=(1e4195ced86d55915d5ea5e741dba20b70f91706fc09e27728a63a4490f4d7c5
               c104395d164f4c7aaeef88b6f888b6b10de9e89df4c20350daa8b44823266ada
               33b5c24be43dac7e3de929ac7d2963c95bf0efc354631e3c5ddf91310d6496c2
               05c9931cffa91fb9c9206c75dd3c4475427ec5e7fceb50c312c95669196c36f0
               6ddb26b673c50ff83957b3f18fba9b809e650608bb5a42a599c9ca1a7c7915c9
               b9af690df989fa29239593378f0a916ee1f039eae88d63cce32f11dfc7f2ef2f
               b14895c139a1bcce8320b040f2e494aa04414f51d254fe6213cd87958861bd7d)
fi

package() {
  cp -rPf usr ${pkgdir}
  cp -rPf etc ${pkgdir}
  cp -rPf var ${pkgdir}
}

